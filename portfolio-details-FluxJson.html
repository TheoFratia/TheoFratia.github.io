<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Portfolio Details - Personal Bootstrap Template</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: MyResume - v4.7.0
  * Template URL: https://bootstrapmade.com/free-html-bootstrap-template-my-resume/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <main id="main">

    <!-- ======= Portfolio Details Section ======= -->
    <section id="portfolio-details" class="portfolio-details">
      <div class="container">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper">
              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <img src="assets/img/Projet/FluxJson/FSCarte.png" alt="capture d'écran de la carte ens loire">
                </div>

                <div class="swiper-slide">
                  <img src="assets/img/Projet/FluxJson/FSurl.png" alt="capture d'écran de l'envoie des données en json">
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-4">
            <div class="portfolio-info">
              <h3>Flux Json</h3>
              <ul>
                <li><strong>Type de réalisation</strong>: Réalisation en milieu professionnel en cours de deuxième année</li>
                <li><strong>Categorie</strong>: Répondre aux incidents et au demandes d'assistance et dévolution, Développer la présence en ligne de l'organisation</li>
                <li><strong>Champ envoyé</strong>: categorie, nom, adresse, num_tel, site, mail, description, geom, id_origine, photo, commune, code_postalx, id.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row gy-4">
          <div class="col-lg-12 portfolio-description" style="text-align: left; margin-top: 2%;">
            <h2>Description</h2>
              <p>
                Ce projet a été réaliser dans l'entreprise Département De La Loire au cour du stage de deuxième année de BTS SIO.<br>
                Le but du projet est d'envoyer un flux json en rajoutant &json après le nom de la map dans l'url pour que le prestataire qui est en charge du site loire.fr puisse récupérer toutes les données utilisées pour la carte et que ses données soit accéessible depuis le moteur de recherche du site loire.fr.<br>
                Pour Tous les types de carte les champs envoyées doivent être les même pour pouvoir automatisé la recherche sur le site loire.fr.<br>
                La première image montre l'url pour afficher la carte, la deuxième image montre l'url pour récupérer le flux json de la carte. 
              </p></br></br>
            <h2>Les Étapes</h2></br>
            <p><strong><u>Verification il y a &Json dans l'url</u></strong></p>
            <pre>
              if(isset($_GET["json"])){
                echo"&lt;div class='invisible' id='jsonOut'&gt;&lt;/div&gt;";
              }
            </pre>
            <p><strong><u>Création des champs Json (exemple Apidae)</u></strong></p>
            <pre>
              window.jsonOutHinaura = new Array(); (initialisation)

              window.Site = "";
              window.numTel = "";
              window.mailjson = "";
              resultItem.informations.moyensCommunication.forEach(item => {
                  if (item.type.id == '205') {
                      Site += item.coordonnees.fr + ","
                  } else if (item.type.id == '201') {
                      numTel += item.coordonnees.fr + ","
                  } else if (item.type.id == '204') {
                      mailjson += item.coordonnees.fr
                  }
              })
              window.image = "";
              resultItem.illustrations.forEach(item => {
                  image += item.traductionFichiers[0].url + ",";
              })
              jsonOutApidae.push({
                  categorie: 'Apidae',
                  nom: resultItem.nom,
                  adresse: resultItem.localisation.adresse.adresse1 + ' ' + resultItem.localisation.adresse.codePostal,
                  num_tel: numTel,
                  site: Site,
                  mail: mailjson,
                  description: resultItem.presentation.descriptifCourt.libelleFr,
                  geom: resultItem.localisation.geolocalisation.geoJson.coordinates,
                  id_origine: markerId,
                  photo: image,
                  commune: resultItem.localisation.adresse.commune,
                  code_postalx: resultItem.localisation.adresse.codePostal,
                  id: resultItem.id,
              })
            </pre>
            <p><strong><u>Creation du JSON</u></strong></p>
            <pre>
              var jsonOut = document.getElementById('jsonOut'); (initialisation)

              if(jsonOut) {
                if (jsonVar.features[0].properties.type_carte == 'apidae') {
                 var writeJsonApidae = JSON.stringify(jsonOutApidae);
                 document.write(writeJsonApidae);
               }
              }
            </pre>
          </div>
        </div>

      </div>
    </section><!-- End Portfolio Details Section -->

  </main><!-- End #main -->

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/typed.js/typed.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>